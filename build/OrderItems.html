<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Order Items : Okanjo API Core Specification</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="assets_/css/shCore.css">
        <link rel="stylesheet" href="assets_/css/shThemeDefault.css">
        <link rel="stylesheet" href="assets_/css/main.css">
    </head>
    <body data-root-path="">
        <div id="wrapper">
            <div id="content">

<ul id="topnav">
    <li><a href="index.html">Index</a></li>
    <li><a href="#toc">TOC</a></li>
</ul>
<h1 id="orderitems">Order Items</h1>

<p>Order items represent copies of products that were purchased within an <a href="Orders.html#Order"><code>Order</code></a>.</p>

<blockquote>
  <p><em>* Order item routes have been refactored and changes will be reflected soon *</em></p>
</blockquote>

<h2 id="tableofcontentsahreftocnametocclassdeeplinka">Table of Contents <a href="#toc" name="toc" class="deep-link">#</a></h2>

<ul>
<li><a href="#OrderItem">OrderItem</a></li>
<li><a href="#OrderItemStatus">OrderItemStatus</a></li>
<li><a href="#Payout">Payout</a></li>
<li><a href="#GET /order-items">GET /order-items</a></li>
<li><a href="#GET /order-items/{item_id}">GET /order-items/{item_id}</a></li>
<li><a href="#PUT /order-items/{item_id}">PUT /order-items/{item_id}</a></li>
</ul>

<h2 id="orderitemahreforderitemidorderitemclassdeeplinka">OrderItem <a href="#OrderItem" id="OrderItem" class="deep-link">#</a></h2>

<p>Represents a snapshot of a product that was purchased.</p>

<blockquote>
  <p><em>* Order item routes have been refactored and changes will be reflected soon *</em></p>
</blockquote>

<dl class="inline-def"><dt><p><code>id</code></p></dt><dd><p><code>int</code>  The unique ID of the item.</p></dd><dt><p><code>created</code></p></dt><dd><p><code>date time</code>  When the item was created.</p></dd><dt><p><code>updated</code></p></dt><dd><p><code>date time</code>  When the item was last updated.</p></dd><dt><p><code>order_id</code></p></dt><dd><p><code>int</code>  The unique ID of the order the item was purchased through.</p></dd><dt><p><code>product_id</code></p></dt><dd><p><code>int</code>  The original unique product ID the item was listed as.</p></dd><dt><p><code>quantity</code></p></dt><dd><p><code>int</code>  How many of this item was purchased.</p></dd><dt><p><code>status</code></p></dt><dd><p><code>int enum</code>  The status of the item. See <a href="Constants.html#OrderStatus">OrderStatus</a>.</p></dd><dt><p><code>product_donation_perc</code></p></dt><dd><p><code>int (0-100)</code> Nullable. The original percentage of the sale of the item that will be donated to the associated cause.</p></dd><dt><p><code>product_seller_id</code></p></dt><dd><p><code>int</code>  The original unique ID of the user selling the product.</p></dd><dt><p><code>product_cause_id</code></p></dt><dd><p><code>int</code> Nullable. The original unique ID of the cause the the product was being pledged to.</p></dd><dt><p><code>product_location_zip</code></p></dt><dd><p><code>string (10)</code>  The original location of the product.</p></dd><dt><p><code>product_is_local_pickup</code></p></dt><dd><p><code>bit</code>  Whether the original product offered local pickup.</p></dd><dt><p><code>product_is_free_shipping</code></p></dt><dd><p><code>bit</code>  Whether the original product offered free shipping</p></dd><dt><p><code>product_thumbnail_media_id</code></p></dt><dd><p><code>int</code>  The original thumbnail media ID of the product.</p></dd><dt><p><code>product_media_id_csv</code></p></dt><dd><p><code>int csv</code>  All of the original media image ID’s assocaited with the product.</p></dd><dt><p><code>product_price</code></p></dt><dd><p><code>decimal</code>  The original cost of the product.</p></dd><dt><p><code>product_title</code></p></dt><dd><p><code>string (255)</code>  The original title of the product.</p></dd><dt><p><code>product_type</code></p></dt><dd><p><code>int enum</code>   The original type of the product. See <a href="Constants.html#ProductType">ProductType</a>.</p></dd><dt><p><code>product_description</code></p></dt><dd><p><code>string (64K)</code>  The original description of the product.</p></dd><dt><p><code>product_condition</code></p></dt><dd><p><code>string enum</code>  The original condition of the product. See <a href="Constants.html#ProductCondition">ProductCondition</a>.</p></dd><dt><p><code>shipping_description</code></p></dt><dd><p><code>string (32)</code> Nullable. The original selected shipping description.</p></dd><dt><p><code>shipping_price</code></p></dt><dd><p><code>decimal</code> Nullable. The original cost of shipping.</p></dd><dt><p><code>tracking_carrier</code></p></dt><dd><p><code>string (64)</code> Nullable. The shipping provider, provided by the seller.</p></dd><dt><p><code>tracking_number</code></p></dt><dd><p><code>string (64)</code> Nullable. The shipping tracking number, provided by the seller.</p></dd><dt><p><code>product_deal_start</code></p></dt><dd><p><code>date time</code> Nullable. When the deal/Giving Reward can start being purchased.</p></dd><dt><p><code>product_deal_end</code></p></dt><dd><p><code>date time</code> Nullable. When the deal/Giving Reward can no longer be purchased.</p></dd><dt><p><code>product_promo_start</code></p></dt><dd><p><code>date time</code> Nullable. When the deal/Giving Reward can start being redeemed for its promotional value.</p></dd><dt><p><code>product_promo_end</code></p></dt><dd><p><code>date time</code> Nullable. When the deal/Giving Reward can no longer be redeemed for its promotional value.</p></dd><dt><p><code>product_deal_value</code></p></dt><dd><p><code>decimal</code> Nullable. The promotional value of the deal/Giving Reward.</p></dd><dt><p><code>deal_number</code></p></dt><dd><p><code>int</code> Nullable. The unique deal number identifier of the deal/Giving Reward used on the voucher.</p></dd><dt><p><code>product_deal_vendor_ack</code></p></dt><dd><p><code>string (255)</code> Nullable. For vendors to indicate which employee marked a deal/Giving Reward as redeemed.</p></dd><dt><p><code>order</code></p></dt><dd><p><a href="Orders.html#Order"><code>Order</code></a>  Embeddable. The order the item was purchased through.</p></dd><dt><p><code>seller</code></p></dt><dd><p><a href="Users.html#UserProfile"><code>UserProfile</code></a>  Embeddable. The seller who sold the item.</p></dd><dt><p><code>buyer</code></p></dt><dd><p><a href="Users.html#UserProfile"><code>UserProfile</code></a>  Embeddable. The buyer who bought the item.</p></dd><dt><p><code>cause</code></p></dt><dd><p><a href="Causes.html#Cause"><code>Cause</code></a>  Embeddable. The cause the item was pledged to.</p></dd><dt><p><code>media</code></p></dt><dd><p><a href="Media.html#Media Embeds"><code>Media Embeds</code></a>  Embeddable. The associated media for the associated product, seller, buyer, and cause.</p></dd><dt><p><code>feedback</code></p></dt><dd><p><a href="Users.html#UserFeedback"><code>UserFeedback</code></a>  Embeddable. The feedback received from the buyer about the seller.</p></dd><dt><p><code>history</code></p></dt><dd><p><a href="OrderItems.html#OrderItemStatus"><code>OrderItemStatus[]</code></a>  Embeddable. The history of status dates. Informs on when the order item hit various milestones.</p></dd><dt><p><code>payouts</code></p></dt><dd><p><a href="OrderItems.html#Payout"><code>Payout[]</code></a>  Embeddable. The payouts associated with the item. Used for the breakdown of the item. Can only be embedded on sales.</p></dd><dt><p><code>stores</code></p></dt><dd><p><a href="Stores.html#Store"><code>Store[]</code></a>  Embeddable. The store(s) associated with the seller.</p></dd></dl>

<h2 id="orderitemstatusahreforderitemstatusidorderitemstatusclassdeeplinka">OrderItemStatus <a href="#OrderItemStatus" id="OrderItemStatus" class="deep-link">#</a></h2>

<blockquote>
  <p><em>* Order item routes have been refactored and changes will be reflected soon *</em></p>
</blockquote>

<dl class="inline-def"><dt><p><code>id</code></p></dt><dd><p><code>bigint</code>  The unique ID of the history record.</p></dd><dt><p><code>order_item_id</code></p></dt><dd><p><code>bigint</code>  The unique ID of the associated order item.</p></dd><dt><p><code>status</code></p></dt><dd><p><code>int enum</code>  The status of the item. See <a href="Constants.html#OrderStatus">OrderStatus</a>.</p></dd><dt><p><code>updated</code></p></dt><dd><p><code>int</code>  When the status was set.</p></dd></dl>

<h2 id="payoutahrefpayoutidpayoutclassdeeplinka">Payout <a href="#Payout" id="Payout" class="deep-link">#</a></h2>

<dl class="inline-def"><dt><p><code>id</code></p></dt><dd><p><code>int</code>  The unique ID of the payout.</p></dd><dt><p><code>status</code></p></dt><dd><p><code>int enum</code>  The status of the item. Options are: See <a href="Constants.html#PayoutStatus">PayoutStatus</a>.</p></dd><dt><p><code>user_id</code></p></dt><dd><p><code>int</code> Nullable. Optional. The unique ID of the seller being paid.</p></dd><dt><p><code>cause_id</code></p></dt><dd><p><code>int</code> Nullable. Optional. The unique ID of the cause being paid.status</p></dd><dt><p><code>is_okanjo_commission</code></p></dt><dd><p><code>bit</code>  Whether the payout is Okanjo’s commission for brokering the transaction.</p></dd><dt><p><code>amount</code></p></dt><dd><p><code>decimal (10)</code>  The amount of the payout, after processing fees and commission, before disbursement fees.</p></dd><dt><p><code>estimated_fee</code></p></dt><dd><p><code>decimal (10)</code>  The estimated disbursement fee. Is subject to change depending on payout groupings or payout method changes.</p></dd><dt><p><code>fee</code></p></dt><dd><p><code>decimal (10)</code>  The final disbursement fee. May not match estimated fee due to grouping or payout method change.</p></dd></dl>

<h1 id="routes">Routes</h1>

<h2 id="getorderitemsahrefgetorderitemsidgetorderitemsclassdeeplinka">GET /order-items <a href="#GET /order-items" id="GET /order-items" class="deep-link">#</a></h2>

<p>Collection. By default, it returns all order items, most recent first, <strong>purchased by the current user</strong>. This collection accepts search filters and pagination options. <strong>Requires user level authentication.</strong></p>

<blockquote>
  <p><em>* Order item routes have been refactored and changes will be reflected soon *</em></p>
</blockquote>

<h3 id="queryparameters">Query Parameters</h3>

<p><em>Filtering</em></p>

<dl class="inline-def"><dt><p><code>id</code></p></dt><dd><p><code>int csv</code> Return only order items with the given ID or ID’s.</p></dd><dt><p><code>order_id</code></p></dt><dd><p><code>int csv</code> Return only order items that were purchased in the given order id or ids.</p></dd><dt><p><code>status</code></p></dt><dd><p><code>int csv</code> Return only order items in the given status(es). See <a href="Constants.html#OrderStatus">OrderStatus</a>.</p></dd><dt><p><code>!status</code></p></dt><dd><p><code>int csv</code> Return order items not in the given status(es). See <a href="Constants.html#OrderStatus">OrderStatus</a>.</p></dd><dt><p><code>product_seller_id</code></p></dt><dd><p><code>int</code> Return only order items sold by the given user id.</p></dd><dt><p><code>product_cause_id</code></p></dt><dd><p><code>int</code> Return only order items that were pledged to the given cause id.</p></dd><dt><p><code>order_status</code></p></dt><dd><p><code>int csv</code> Return only order items that belong to an order with the given status(es). See <a href="Constants.html#OrderStatus">OrderStatus</a>.</p></dd><dt><p><code>!order_status</code></p></dt><dd><p><code>int csv</code> Return only order items that that do not belong to orders with the given status(es). See <a href="Constants.html#OrderStatus">OrderStatus</a>.</p></dd><dt><p><code>product_type</code></p></dt><dd><p><code>int csv</code> Return only order items of a specific product type or types. See <a href="Constants.html#ProductType">ProductType</a>.</p></dd><dt><p><code>product_id</code></p></dt><dd><p><code>int csv</code> Return only order items of a specific product.</p></dd></dl>

<p><em>Fields &amp; Includes</em></p>

<dl class="inline-def"><dt><p><code>fields</code></p></dt><dd><p><code>string csv</code> When given, only returns the given fields. Can also can specify fields on embedded objects.</p></dd><dt><p><code>embed</code></p></dt><dd><p><code>string csv</code> When given, includes additional related data. Accepts: <code>order, media, seller, buyer, cause, feedback, history, stores.</code></p></dd></dl>

<h3 id="returns">Returns</h3>

<ul>
<li>Array of <a href="OrderItems.html#OrderItem">OrderItem</a> objects.</li>
<li><code>X-COLLECTION-COUNT</code> header set to the total number of order items that match the given query. Used for pagination.</li>
</ul>

<h3 id="errors">Errors</h3>

<dl><dt><p><strong>500 Internal Server Error</strong></p></dt><dd><p><code>Failed to retrieve order items.</code> Occurs when the request failed to be fulfilled.</p></dd></dl>

<h2 id="getorderitemsitem_idahrefgetorderitemsitem_ididgetorderitemsitem_idclassdeeplinka">GET /order-items/{item_id} <a href="#GET /order-items/{item_id}" id="GET /order-items/{item_id}" class="deep-link">#</a></h2>

<p>Resource. Returns a specific order item given its unique identifier bought by the current user. <strong>Requires user level authentication.</strong></p>

<blockquote>
  <p><em>* Order item routes have been refactored and changes will be reflected soon *</em></p>
</blockquote>

<h3 id="queryparameters">Query Parameters</h3>

<p><em>Fields &amp; Includes</em></p>

<dl class="inline-def"><dt><p><code>fields</code></p></dt><dd><p><code>string csv</code> When given, only returns the given fields. Can also can specify fields on embedded objects.</p></dd><dt><p><code>embed</code></p></dt><dd><p><code>string csv</code> When given, includes additional related data. Accepts: <code>order, media, seller, buyer, cause, feedback, history, stores</code>.</p></dd></dl>

<h3 id="returns">Returns</h3>

<p><a href="OrderItems.html#OrderItem">OrderItem</a> object.</p>

<h3 id="errors">Errors</h3>

<dl><dt><p><strong>404 Not Found</strong></p></dt><dd><p><code>Order item not found.</code> Occurs when the given order item was not found.</p></dd><dt><p><strong>500 Internal Server Error</strong></p></dt><dd><p><code>Failed to retrieve order item.</code> Occurs when the request failed to be fulfilled.</p></dd></dl>

<h2 id="putorderitemsitem_idahrefputorderitemsitem_ididputorderitemsitem_idclassdeeplinka">PUT /order-items/{item_id} <a href="#PUT /order-items/{item_id}" id="PUT /order-items/{item_id}" class="deep-link">#</a></h2>

<p>Resource. Updates the status of the order item. Used by buyers to indicate an item was received. <strong>Requires user level authentication.</strong></p>

<blockquote>
  <p><em>* Order item routes have been refactored and changes will be reflected soon *</em></p>
</blockquote>

<h3 id="entitynvpparameters">Entity NVP Parameters</h3>

<dl class="inline-def"><dt><p><code>status</code></p></dt><dd><p><code>int enum</code> The status to set the order item to. Must be 4 (Complete) when item status is currently 3 (Pending acquisition) OR if currently 2 (Pending fulfilment and checkout option was local pickup). See <a href="Constants.html#OrderStatus">OrderStatus</a>.</p></dd></dl>

<h3 id="returns">Returns</h3>

<p>Generic <a href="Globals.html#Default Response Object"><code>Success</code></a> object.</p>

<h3 id="errors">Errors</h3>

<dl><dt><p><strong>400 Bad Request</strong></p></dt><dd><p><code>Order status change prohibited.</code> Occurs when the status cannot be changed to the given value due to the current state of the order item.</p></dd><dd><p><code>Invalid status.</code> Occurs when the given status is not a valid status code that can be applied.</p></dd><dt><p><strong>403 Forbidden</strong></p></dt><dd><p><code>Insufficient privileges for this operation.</code> Occurs when the current user does not have access to the given order item.</p></dd><dt><p><strong>404 Not Found</strong></p></dt><dd><p><code>Order item not found.</code> Occurs when the given order item was not found or is invalid.</p></dd><dt><p><strong>500 Internal Server Error</strong></p></dt><dd><p><code>System error.</code> Occurs when the request failed to be fulfilled.</p></dd></dl>
                <hr />
                <small>Documentation generated by <a href="https://github.com/millermedeiros/mdoc">mdoc</a>.</small>
            </div>
        </div>
        <script src="assets_/js/lib/jquery.js"></script>
        <script src="assets_/js/lib/syntax-highlighter/shCore.js"></script>
        <script src="assets_/js/lib/syntax-highlighter/shAutoloader.js"></script>
        <script src="assets_/js/main.js"></script>
    </body>
</html>

