<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Stores : Okanjo API Core Specification</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="assets_/css/shCore.css">
        <link rel="stylesheet" href="assets_/css/shThemeDefault.css">
        <link rel="stylesheet" href="assets_/css/main.css">
    </head>
    <body data-root-path="">
        <div id="wrapper">
            <div id="content">

<ul id="topnav">
    <li><a href="index.html">Index</a></li>
    <li><a href="#toc">TOC</a></li>
</ul>
<h1 id="stores">Stores</h1>

<p>The base organizational unit which sells products and receives funds.</p>

<p>Stores own products, and may inherit products as well, e.g. cross-listing for items pledging to a cause.</p>

<h1 id="objects">Objects</h1>

<ul>
<li><a href="Objects.html#Store"><code>Store</code></a> – A seller's store.</li>
<li><a href="Objects.html#Plan"><code>Plan</code></a> – A plan the store is subscribed to.</li>
<li><a href="Objects.html#Subscription"><code>Subscription</code></a> – The store's plan subscription state.</li>
<li><a href="Objects.html#PlanPromotion"><code>PlanPromotion</code></a> – A plan-promotion applied to the store's subscription.</li>
</ul>

<h1 id="routes">Routes</h1>

<h2 id="tableofcontentsahreftocnametocclassdeeplinka">Table of Contents <a href="#toc" name="toc" class="deep-link">#</a></h2>

<ul>
<li><a href="#GET /stores">GET /stores</a></li>
<li><a href="#GET /stores/{id}">GET /stores/{id}</a></li>
<li><a href="#PUT /stores/{id}">PUT /stores/{id}</a></li>
</ul>

<h2 id="getstoresahrefgetstoresidgetstoresclassdeeplinka">GET /stores <a href="#GET /stores" id="GET /stores" class="deep-link">#</a></h2>

<p>Collection. By default, it returns all stores alphabetically. This collection accepts search filters and pagination options.</p>

<h3 id="queryparameters">Query Parameters</h3>

<p>All fields are optional. Accepts the standard pagination parameters as well.</p>

<p><em>Filtering</em></p>

<dl class="inline-def"><dt><p><code>id</code></p></dt><dd><p><code>int csv</code> Returns stores with the given store id or list of store id’s. e.g. <code>id=1</code> or <code>id=1,2,3,4,5</code></p></dd><dt><p><code>search</code></p></dt><dd><p><code>string</code> Returns stores that match the search query. Use this for user-given search strings.</p></dd><dt><p><code>seller_id</code></p></dt><dd><p><code>int</code> Returns stores that are managed by the given user id.</p></dd><dt><p><code>cause_id</code></p></dt><dd><p><code>int</code> Returns the store that belong to the given cause id.</p></dd><dt><p><code>has_products</code></p></dt><dd><p><code>int</code> Returns stores that have at least this number of products listed or products donating to them. When <code>0</code>, find stores without any products. Affected by the <code>product_types</code> filter.</p></dd><dt><p><code>product_types</code></p></dt><dd><p><code>int enum csv</code> Specify the association of products used for the <code>product_count</code> property on the store and the <code>has_products</code> filter. Defaults to <code>OWNED</code> and <code>INHERITED</code>. See <a href="Constants.html#ProductStoreType">ProductStoreType</a>.</p></dd><dt><p><code>local_to</code></p></dt><dd><p><code>int</code> DMA region code that the cause must be registered in. See <a href="Regions.html">Regions</a>.</p></dd><dt><p><code>current_plan_id</code></p></dt><dd><p><code>int csv</code> Returns stores that have an active subscription to the given plan id(s).</p></dd><dt><p><code>has_permission</code></p></dt><dd><p><code>int flags</code> Returns stores that have the given bitwise set of flags. May take multiple flags. e.g. <code>IS_VENDOR</code> bitwise-or <code>STOREFRONT_ENABLED</code> = <code>3</code>. See <a href="Constants.html#StoreFlag">StoreFlag</a>.</p></dd><dt><p><code>has_banner</code></p></dt><dd><p><code>bit</code> Returns stores that have a banner set when <code>1</code>, or returns stores that do not have a banner set when <code>0</code>.</p></dd></dl>

<p><em>Fields &amp; Includes</em></p>

<dl class="inline-def"><dt><p><code>fields</code></p></dt><dd><p><code>csv</code> When given, only returns the given fields. Can also can specify fields on embedded objects.</p></dd><dt><p><code>embed</code></p></dt><dd><p><code>csv</code> When given, includes the additional resources. Accepts: <code>media</code>, <code>addresses</code>, <code>products:n</code>, <code>causes</code>, <code>cards</code>, <code>bank_accounts</code>, <code>return_policies</code>, <code>subscription</code>.</p></dd></dl>

<h3 id="returns">Returns</h3>

<p>Array of <a href="Objects.html#Store"><code>Store</code></a> objects.</p>

<h3 id="errors">Errors</h3>

<dl><dt><p><strong>500 Internal Server Error</strong></p></dt><dd><p><code>Unable to retrieve stores.</code> Occurs when the request failed to be fulfilled.</p></dd></dl>

<h2 id="getstoresidahrefgetstoresididgetstoresidclassdeeplinka">GET /stores/{id} <a href="#GET /stores/{id}" id="GET /stores/{id}" class="deep-link">#</a></h2>

<p>Resource. Gets a specific store resource by its unique identifier.</p>

<h3 id="queryparameters">Query Parameters</h3>

<p><em>Fields &amp; Includes</em></p>

<dl class="inline-def"><dt><p><code>fields</code></p></dt><dd><p><code>csv</code> When given, only returns the given fields. Can also can specify fields on embedded objects.</p></dd><dt><p><code>embed</code></p></dt><dd><p><code>csv</code> When given, includes the additional resources. Accepts: <code>media</code>, <code>addresses</code>, <code>products:n</code>, <code>causes</code>, <code>cards</code>, <code>bank_accounts</code>, <code>return_policies</code>, <code>subscription</code>.</p></dd></dl>

<h3 id="returns">Returns</h3>

<p><a href="Objects.html#Store"><code>Store</code></a> object.</p>

<h3 id="errors">Errors</h3>

<dl><dt><p><strong>404 Not Found</strong></p></dt><dd><p><code>Store not found.</code> Occurs when the given store was not found.</p></dd><dt><p><strong>500 Internal Server Error</strong></p></dt><dd><p><code>Unable to retrieve store.</code> Occurs when the request failed to be fulfilled.</p></dd></dl>

<h2 id="putstoresidahrefputstoresididputstoresidclassdeeplinka">PUT /stores/{id} <a href="#PUT /stores/{id}" id="PUT /stores/{id}" class="deep-link">#</a></h2>

<p>Resource. Updates a store by its unique identifier. <strong>Requires user level authentication.</strong></p>

<h3 id="entitynvpparameters">Entity NVP Parameters</h3>

<p>Only send the fields that should be updated. Send them all if you’d really like.</p>

<dl class="inline-def"><dt><p><code>name</code></p></dt><dd><p><code>string (6-32)</code> The pretty store name, which may contain letters, numbers and the following characters: space, apostrophe, hyphen, and ampersand.</p></dd><dt><p><code>contact_email</code></p></dt><dd><p><code>string</code> The email address in which to contact the store.</p></dd><dt><p><code>about</code></p></dt><dd><p><code>string (512)</code> Information about the seller’s store. Can contain no more than 3 line breaks before they’re stripped.</p></dd><dt><p><code>avatar_media_id</code></p></dt><dd><p><code>int</code> Media image ID to use for the store logo/avatar. Target media image must belong to the seller.</p></dd><dt><p><code>banner_media_id</code></p></dt><dd><p><code>int</code> Media image ID to use for the store banner image. Target media image must belong to the seller.</p></dd><dt><p><code>zip</code></p></dt><dd><p><code>string (10)</code> The zip code the store is located in.</p></dd><dt><p><code>website_url</code></p></dt><dd><p><code>string (255)</code> The URL of the store’s web presence. Protocol must be HTTP or HTTPS.</p></dd><dt><p><code>facebook_url</code></p></dt><dd><p><code>string (255)</code> The URL of the store’s Facebook presence. Protocol must be HTTP or HTTPS and domain must end in facebook.com.</p></dd><dt><p><code>twitter_url</code></p></dt><dd><p><code>string (255)</code> The URL of the store’s twitter presence. Protocol must be HTTP or HTTPS and domain must end in twitter.com.</p></dd><dt><p><code>okanjo_url</code></p></dt><dd><p><code>string (20)</code> The requested Okanjo vanity URL.</p></dd><dt><p><code>payout_preference</code></p></dt><dd><p><code>string enum</code> Nullable. The store’s payout preference. See <a href="Constants.html#PayoutPreference">PayoutPreference</a>.</p></dd><dt><p><code>balanced_account_uri</code></p></dt><dd><p><code>string</code> The URI of the tokenized Balanced Payments bank account URI to use as the default payout method. Used when adding or switching bank accounts.</p></dd><dt><p><code>payout_type</code></p></dt><dd><p><code>string enum</code> Used when adding a new bank account. The type of bank account information being attached. One of <code>bank_business</code> or <code>bank_personal</code></p></dd><dt><p><code>payout_business_name</code></p></dt><dd><p><code>string (255)</code> Used when adding a new bank account. The name of the business associated with the bank account. Required for <code>bank_business</code> type.</p></dd><dt><p><code>payout_business_ein</code></p></dt><dd><p><code>string (32)</code> Used when adding a new bank account. The IRS EIN number of the business associated with the bank account. Required for <code>bank_business</code> type.</p></dd><dt><p><code>payout_first_name</code></p></dt><dd><p><code>string (255)</code> Used when adding a new bank account. The first name of the person associated with the bank account.</p></dd><dt><p><code>payout_last_name</code></p></dt><dd><p><code>string (255)</code> Used when adding a new bank account. The last name of the person associated with the bank account.</p></dd><dt><p><code>payout_address1</code></p></dt><dd><p><code>string (255)</code> Used when adding a new bank account. The street address of the business or person associated with the bank account.</p></dd><dt><p><code>payout_address2</code></p></dt><dd><p><code>string (255)</code> Used when adding a new bank account. Optional building, unit, apartment number or secondary address component.</p></dd><dt><p><code>payout_city</code></p></dt><dd><p><code>string (255)</code> Used when adding a new bank account. The city of the business or person associated with the bank account.</p></dd><dt><p><code>payout_state</code></p></dt><dd><p><code>string (2)</code> Used when adding a new bank account. The state code of the business or person associated with the bank account.</p></dd><dt><p><code>payout_postal</code></p></dt><dd><p><code>string (10)</code> Used when adding a new bank account. The postal code of the business or person associated with the bank account.</p></dd><dt><p><code>payout_country</code></p></dt><dd><p><code>string (2)</code> Used when adding a new bank account. The country code of the business or person associated with the bank account.</p></dd><dt><p><code>payout_phone</code></p></dt><dd><p><code>string (20)</code> Used when adding a new bank account. The phone number of the business or person associated with the bank account.</p></dd><dt><p><code>balanced_card_uri</code></p></dt><dd><p><code>string</code> The URI of the tokenized Balanced Payments payment card URI to use as the default payment method. Used when adding or switching payment cards.</p></dd><dt><p><code>promo_code</code></p></dt><dd><p><code>string</code> Adds a promotion code to the store's active subscription. Must be a valid promotional code for the plan or the request will be rejected.</p></dd></dl>

<blockquote>
  <p><em>* Note: Providing the <code>balanced_card_uri</code> field will cause the subscription to be renewed immediately, if the subscription is past-due or requires payment to activate.</em>*</p>
</blockquote>

<h3 id="returns">Returns</h3>

<p>Updated <a href="Objects.html#Store"><code>Store</code></a> object.</p>

<h3 id="errors">Errors</h3>

<dl><dt><p><strong>400 Bad Request</strong></p></dt><dd><p><code>Invalid {field}</code> Occurs when the given field was invalid.</p></dd><dd><p><code>{field} too long.</code> Occurs when the given field was too long.</p></dd><dt><p><strong>404 Not Found</strong></p></dt><dd><p><code>Store not found.</code> Occurs when the given store was not found.</p></dd><dt><p><strong>500 Internal Server Error</strong></p></dt><dd><p><code>Unable to update store.</code> Occurs when the request failed to be fulfilled.</p></dd></dl>
                <hr />
                <small>Documentation generated by <a href="https://github.com/millermedeiros/mdoc">mdoc</a>.</small>
            </div>
        </div>
        <script src="assets_/js/lib/jquery.js"></script>
        <script src="assets_/js/lib/syntax-highlighter/shCore.js"></script>
        <script src="assets_/js/lib/syntax-highlighter/shAutoloader.js"></script>
        <script src="assets_/js/main.js"></script>
    </body>
</html>

